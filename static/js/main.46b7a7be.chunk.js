(this.webpackJsonpnotes=this.webpackJsonpnotes||[]).push([[0],{153:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},465:function(e,t,a){},466:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a(20),i=a.n(c),s=(a(153),a(12)),o=a(15),r=a(97),l=(a(154),a(467),r.a.initializeApp({apiKey:"AIzaSyAg1Ru2Z9t_YGotgrYksHE2K3Oy04dLBqk",authDomain:"notes-56c5c.firebaseapp.com",projectId:"notes-56c5c",storageBucket:"notes-56c5c.appspot.com",messagingSenderId:"736533287725",appId:"1:736533287725:web:0cac0d65cbb7277a8db9a4"}).firestore()),d=r.a.auth(),u={ADD_NOTE:"ADD_NOTE",DELETE_NOTE:"DELETE-NOTE",CLEAR_STORE:"CLEAR_STORE",UPDATE_NOTE:"UPDATE_NOTE"},j=function(e){return{type:u.ADD_NOTE,payload:e}},b=a(33),m=function(e){var t=e.deleteNote,a=e.id,c=e.title,i=e.description,r=e.date,j=Object(n.useState)(!1),m=Object(o.a)(j,2),h=m[0],O=m[1],f=Object(b.c)(),v=(new Date).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"numeric"}),p=function(e){E(h&&!e?{title:c,description:i,date:r}:Object(s.a)(Object(s.a)({},N),{},{date:v})),O((function(e){return!e}))},g=Object(n.useState)({title:c,description:i,date:r}),x=Object(o.a)(g,2),N=x[0],E=x[1];return{values:N,isEditActive:h,handleDelete:function(){t(a)},handleTitleInput:function(e){E(Object(s.a)(Object(s.a)({},N),{},{title:e.target.value}))},handleDescriptionInput:function(e){E(Object(s.a)(Object(s.a)({},N),{},{description:e.target.value}))},handleUpdate:function(){var e;f((e={title:N.title,description:N.description,date:N.date,id:a},{type:u.UPDATE_NOTE,payload:e})),d.onAuthStateChanged((function(e){e&&l.collection(e.email).where("id","==",a).get().then((function(e){e.docs[0].ref.update({title:N.title,description:N.description,date:v})})).catch((function(e){return console.error(e.message)}))})),p(!0)},handleEdit:p}},h=a(2),O=Object(n.forwardRef)((function(e,t){var a=e.title,n=e.description,c=e.id,i=e.date,s=e.deleteNote,o=e.activateCursor,r=e.deactivateCursor,l=m({deleteNote:s,id:c,title:a,description:n,date:i}),d=l.values,u=l.isEditActive,j=l.handleDelete,b=l.handleTitleInput,O=l.handleDescriptionInput,f=l.handleUpdate,v=l.handleEdit;return Object(h.jsxs)("div",{className:"note",id:c,ref:t,children:[u?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"add-note-title original ",children:Object(h.jsx)("input",{type:"text",placeholder:"Title",value:d.title,onChange:b,required:!0,"data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false"})}),Object(h.jsx)("div",{className:"add-note-description original",children:Object(h.jsx)("textarea",{name:"add-note-description",id:"add-note-description",placeholder:"Description",value:d.description,onChange:O,cols:"30",rows:"10","data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false"})}),Object(h.jsx)("button",{className:"note-cancel-update",onClick:function(){return v(!1)},onMouseEnter:o,onMouseLeave:r,children:Object(h.jsx)("i",{className:"fas fa-times"})}),Object(h.jsx)("button",{className:"note-do-update",onClick:f,onMouseEnter:o,onMouseLeave:r,children:Object(h.jsx)("i",{className:"fas fa-check"})})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{className:"note-title",children:a}),Object(h.jsx)("p",{className:"note-description",children:n}),Object(h.jsx)("button",{className:"note-update",onMouseEnter:o,onMouseLeave:r,onClick:function(){return v(!1)},children:Object(h.jsx)("i",{className:"fas fa-pen-fancy"})}),Object(h.jsx)("button",{className:"note-delete ",onClick:j,onMouseEnter:o,onMouseLeave:r,children:Object(h.jsx)("i",{className:"far fa-trash-alt"})})]}),Object(h.jsx)("p",{className:"note-date",children:d.date})]})})),f=(a(163),function(e){var t=e.addNote,a=(new Date).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"numeric"}),c=Object(n.useState)({title:"",description:"",date:a,id:""}),i=Object(o.a)(c,2),r=i[0],l=i[1];return{values:r,today:a,handleTitleInput:function(e){l(Object(s.a)(Object(s.a)({},r),{},{title:e.target.value}))},handleDescriptionInput:function(e){l(Object(s.a)(Object(s.a)({},r),{},{description:e.target.value}))},addToNotes:function(){if(""!==r.title&&""!==r.description){var e=r;e.id=(new Date).toLocaleDateString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"}),t(e),l({title:"",description:"",date:a,id:""})}else alert("You need to complete both entries")}}}),v=function(e){var t=e.addNote,a=e.activateCursor,n=e.deactivateCursor,c=f({addNote:t}),i=c.values,s=c.handleTitleInput,o=c.handleDescriptionInput,r=c.addToNotes,l=c.today;return Object(h.jsxs)("div",{className:"note add-note",children:[Object(h.jsx)("div",{className:"add-note-title",children:Object(h.jsx)("input",{type:"text",id:"add-note-title",placeholder:"Title",value:i.title,onChange:s,required:!0,"data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false"})}),Object(h.jsx)("div",{className:"add-note-description",children:Object(h.jsx)("textarea",{name:"add-note-description",id:"add-note-description",placeholder:"Description",value:i.description,onChange:o,cols:"30",rows:"10","data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false"})}),Object(h.jsx)("p",{className:"note-date",children:l}),Object(h.jsx)("button",{className:"note-delete add-note-delete",onClick:r,onMouseEnter:a,onMouseLeave:n,children:Object(h.jsx)("i",{className:"fas fa-plus"})})]})},p=(a(164),a(165),function(e){var t=e.closeModal,a=e.setUser,c=Object(n.useState)({email:"",password:""}),i=Object(o.a)(c,2),r=i[0],l=i[1],u=Object(n.useState)(!1),j=Object(o.a)(u,2),b=j[0],m=j[1];return{values:r,recovery:b,singIn:function(e){e.preventDefault(),d.signInWithEmailAndPassword(r.email,r.password).then((function(e){a(e.user),t()})).catch((function(e){alert(e.message)}))},handleEmailInput:function(e){l(Object(s.a)(Object(s.a)({},r),{},{email:e.target.value}))},handlePasswordInput:function(e){l(Object(s.a)(Object(s.a)({},r),{},{password:e.target.value}))},register:function(e){e.preventDefault(),d.createUserWithEmailAndPassword(r.email,r.password).then((function(e){e&&t()})).catch((function(e){alert(e.message)}))},openChangePassword:function(){m(!0)},changePassword:function(e){e.preventDefault();var t=document.querySelector("#email").value;d.sendPasswordResetEmail(t).then((function(){return alert("Recovery mail sent")})).catch((function(e){return alert(e.message)}))},closeChangePassword:function(){m(!1)}}}),g=function(e){var t=e.isOverlayActive,a=e.closeModal,n=e.activateCursor,c=e.deactivateCursor,i=e.setUser,s=p({closeModal:a,setUser:i}),o=s.values,r=s.recovery,l=s.singIn,d=s.handleEmailInput,u=s.handlePasswordInput,j=s.register,b=s.openChangePassword,m=s.changePassword,O=s.closeChangePassword;return r?Object(h.jsxs)("div",{className:"overlay recovery",children:[Object(h.jsx)("div",{className:"overlay-back",onClick:a,children:Object(h.jsx)("i",{className:"fas fa-times"})}),Object(h.jsx)("div",{className:"login",children:Object(h.jsxs)("form",{children:[Object(h.jsx)("div",{className:"back",children:Object(h.jsx)("i",{className:"fas fa-chevron-circle-left recovery-back",onClick:O,onMouseEnter:n,onMouseLeave:c})}),Object(h.jsx)("div",{className:"login-inputs",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(h.jsx)("input",{type:"email",id:"email",value:o.email,onChange:d,required:!0})]})}),Object(h.jsx)("div",{className:"login-sign-in",children:Object(h.jsx)("button",{onClick:m,onMouseEnter:n,onMouseLeave:c,children:"Send recovery mail"})})]})})]}):Object(h.jsxs)("div",{className:"overlay ".concat(t?"active":""),children:[Object(h.jsx)("div",{className:"overlay-back",onClick:a,onMouseEnter:n,onMouseLeave:c,children:Object(h.jsx)("i",{className:"fas fa-times"})}),Object(h.jsx)("div",{className:"login",children:Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"login-inputs",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(h.jsx)("input",{type:"email",id:"email",value:o.email,onChange:d,required:!0})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(h.jsx)("input",{type:"password",id:"password",value:o.password,onChange:u,required:!0})]})]}),Object(h.jsxs)("div",{className:"login-button",children:[Object(h.jsx)("button",{type:"submit",onClick:l,onMouseEnter:n,onMouseLeave:c,children:"Login"}),Object(h.jsx)("button",{className:"recovery",onClick:b,onMouseEnter:n,onMouseLeave:c,children:"I forgot my password :c"})]}),Object(h.jsx)("div",{className:"login-sign-in",onMouseEnter:n,onMouseLeave:c,children:Object(h.jsx)("button",{onClick:j,children:"Sign in"})})]})})]})},x=a.p+"static/media/Loading.689a2632.gif",N=a(43),E=function(e){var t=Object(n.useState)(),a=Object(o.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)(!0),r=Object(o.a)(s,2),m=r[0],h=r[1],O=Object(n.useState)(!1),f=Object(o.a)(O,2),v=f[0],p=f[1],g=Object(n.useState)(!1),x=Object(o.a)(g,2),E=x[0],y=x[1],C=Object(n.useState)(),w=Object(o.a)(C,2),S=w[0],L=w[1],T=Object(n.useRef)([]),M=Object(b.c)(),D=matchMedia("(hover: none)").matches;Object(n.useEffect)((function(){window.addEventListener("resize",(function(){D=matchMedia("(hover: none)").matches})),window.addEventListener("mousemove",(function(e){if(!D){var t=e.clientX,a=e.clientY;L({left:"".concat(t-10,"px"),top:"".concat(a-10,"px")})}}))}),[]),Object(n.useEffect)((function(){d.onAuthStateChanged((function(e){i(e)}))}),[]);Object(n.useEffect)((function(){d.onAuthStateChanged((function(e){e?A(e.email):localStorage.getItem("notes")?(M(j(JSON.parse(localStorage.getItem("notes")))),h(!1)):h(!1)}))}),[]);var A=function(t){l.collection(t).get().then((function(t){var a=[];t.docs.forEach((function(e){a.push(e.data())})),h(!1),M(j([].concat(Object(N.a)(e),a)))})).catch((function(e){return alert(e.message)}))};return Object(n.useEffect)((function(){!c&&e.length>=1&&localStorage.setItem("notes",JSON.stringify(e))}),[e]),{user:c,isLoading:m,isOverlayActive:v,cursorStyles:S,isCursorOnLink:E,handleAuthentication:function(){c&&window.confirm("Are you sure you want to log out?")&&(d.signOut(),M({type:u.CLEAR_STORE,payload:null}))},openModal:function(){p(!0)},closeModal:function(){p(!1)},addToNotes:function(t){M(j([].concat(Object(N.a)(e),[t]))),c?l.collection(c.email).doc().set(t).then((function(e){return console.log("Note added")})).catch((function(e){return alert(e.message)})):localStorage.setItem("notes",JSON.stringify([].concat(Object(N.a)(e),[t])))},deleteFromNotes:function(t){M({type:u.DELETE_NOTE,payload:t}),c?l.collection(c.email).where("id","==",t).get().then((function(e){e.docs[0].ref.delete()})).catch((function(e){return console.error(e.message)})):localStorage.setItem("notes",JSON.stringify(e.filter((function(e){return e.id!==t}))))},addToRefs:function(e){e&&!T.current.includes(e)&&T.current.push(e)},activateCursor:function(){y(!0)},deactivateCursor:function(){y(!1)},handleSetUser:function(e){i(e)}}},y=(a(166),Object(b.b)((function(e){return{notes:e}}))((function(e){var t=e.notes,a=E(t),n=a.user,c=a.isLoading,i=a.isOverlayActive,s=a.isCursorOnLink,o=a.cursorStyles,r=a.handleAuthentication,l=a.openModal,d=a.closeModal,u=a.addToNotes,j=a.deleteFromNotes,b=a.addToRefs,m=a.activateCursor,f=a.deactivateCursor,p=a.handleSetUser;return c?Object(h.jsx)("div",{className:"loading",children:Object(h.jsx)("img",{src:x,alt:"Loading"})}):Object(h.jsxs)("div",{className:"home",children:[Object(h.jsx)("div",{style:o,className:"cursor ".concat(s?"cursor-on-link":"")}),n?Object(h.jsxs)("div",{className:"home-login logged",children:[Object(h.jsxs)("div",{children:["Hi,",Object(h.jsx)("small",{className:"user-name",children:null===n||void 0===n?void 0:n.email.substr(0,n.email.indexOf("@"))})]}),Object(h.jsx)("button",{onClick:r,className:"log-out",onMouseEnter:m,onMouseLeave:f,children:"Log out"})]}):Object(h.jsx)("button",{className:"home-login",onClick:l,onMouseEnter:m,onMouseLeave:f,children:"Log In"}),Object(h.jsx)("h1",{children:"Notes"}),Object(h.jsxs)("div",{className:"notes-list",children:[null===t||void 0===t?void 0:t.map((function(e,t){return Object(h.jsx)(O,{title:e.title,description:e.description,id:e.id,date:e.date,deleteNote:j,activateCursor:m,deactivateCursor:f,ref:b},t)})),Object(h.jsx)(v,{addNote:u,activateCursor:m,deactivateCursor:f}),Object(h.jsx)(g,{isOverlayActive:i,closeModal:d,activateCursor:m,deactivateCursor:f,setUser:p})]})]})})));a(465);var C=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(y,{})})},w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,468)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),i(e),s(e)}))},S=a(149),L=[],T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case u.ADD_NOTE:return n;case u.DELETE_NOTE:return e.filter((function(e){return e.id!==n}));case u.CLEAR_STORE:return[];case u.UPDATE_NOTE:var c=Object(N.a)(e);for(var i in e)c[i].id===n.id&&(c[i]=n);return c;default:return e}},M=Object(S.a)(T);i.a.render(Object(h.jsx)(b.a,{store:M,children:Object(h.jsx)(C,{})}),document.getElementById("root")),w()}},[[466,1,2]]]);
//# sourceMappingURL=main.46b7a7be.chunk.js.map